<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Header -->
    <div class="mb-8">
        <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-6">
            <div class="flex items-center">
                <i class="fas fa-share text-blue-400 mr-3"></i>
                <div>
                    <h4 class="text-blue-800 font-medium">Shared Folder</h4>
                    <p class="text-blue-700 text-sm">This folder has been shared with you by <%= folder.user.name %></p>
                </div>
            </div>
        </div>
        
        <!-- Breadcrumb Navigation -->
        <% if (currentPath && currentPath.length > 0) { %>
            <nav class="flex mb-4" aria-label="Breadcrumb">
                <ol class="inline-flex items-center space-x-1 md:space-x-3">
                    <li class="inline-flex items-center">
                        <a href="/share/<%= shareToken %>" class="inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600">
                            <i class="fas fa-home mr-2"></i>
                            <%= sharedFolder.folder.name %>
                        </a>
                    </li>
                    <% currentPath.forEach((pathFolder, index) => { %>
                        <li>
                            <div class="flex items-center">
                                <i class="fas fa-chevron-right text-gray-400 mx-1"></i>
                                <% if (index === currentPath.length - 1) { %>
                                    <span class="ml-1 text-sm font-medium text-gray-500 md:ml-2"><%= pathFolder.name %></span>
                                <% } else { %>
                                    <a href="/share/<%= shareToken %>/folder/<%= pathFolder.id %>" class="ml-1 text-sm font-medium text-gray-700 hover:text-blue-600 md:ml-2">
                                        <%= pathFolder.name %>
                                    </a>
                                <% } %>
                            </div>
                        </li>
                    <% }); %>
                </ol>
            </nav>
        <% } %>
        
        <div class="flex items-center justify-between">
            <div>
                <h1 class="text-3xl font-bold text-gray-900 flex items-center">
                    <i class="fas fa-folder-open text-blue-500 mr-3"></i>
                    <%= folder.name %>
                </h1>
                <% if (folder.description) { %>
                    <p class="mt-2 text-gray-600"><%= folder.description %></p>
                <% } %>
                <p class="mt-1 text-sm text-gray-500">
                    Created on <%= new Date(folder.createdAt).toLocaleDateString() %>
                    â€¢ Expires on <%= new Date(sharedFolder.expiresAt).toLocaleDateString() %>
                </p>
            </div>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
        <!-- Main content area -->
        <div class="lg:col-span-3">
            <!-- Subfolders -->
            <% if (subfolders.length > 0) { %>
                <div class="mb-8">
                    <h2 class="text-xl font-semibold text-gray-900 mb-4">
                        <i class="fas fa-folder mr-2"></i>Folders
                    </h2>
                    <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
                        <% subfolders.forEach(subfolder => { %>
                            <a href="/share/<%= shareToken %>/folder/<%= subfolder.id %>" class="block">
                                <div class="bg-white rounded-lg shadow border border-gray-200 p-4 hover:shadow-md transition-shadow cursor-pointer">
                                    <div class="flex items-center">
                                        <i class="fas fa-folder text-blue-500 text-2xl mr-3"></i>
                                        <div class="flex-1">
                                            <h3 class="text-lg font-semibold text-gray-900 truncate">
                                                <%= subfolder.name %>
                                            </h3>
                                            <div class="text-sm text-gray-500 mt-1">
                                                <%= subfolder._count.files %> files, <%= subfolder._count.children %> folders
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <% if (subfolder.description) { %>
                                        <p class="text-gray-600 text-sm mt-3 line-clamp-2"><%= subfolder.description %></p>
                                    <% } %>
                                    
                                    <div class="flex items-center justify-between mt-3">
                                        <span class="text-xs text-gray-500">
                                            Created <%= new Date(subfolder.createdAt).toLocaleDateString() %>
                                        </span>
                                        <div class="flex items-center space-x-2">
                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                                                <i class="fas fa-lock mr-1"></i>Shared
                                            </span>
                                            <i class="fas fa-arrow-right text-gray-400 text-sm"></i>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        <% }); %>
                    </div>
                </div>
            <% } %>

            <!-- Files -->
            <div>
                <h2 class="text-xl font-semibold text-gray-900 mb-4">
                    <i class="fas fa-file mr-2"></i>Files (<%= files.length %>)
                </h2>
                
                <% if (files.length > 0) { %>
                    <div class="bg-white shadow overflow-hidden sm:rounded-md">
                        <ul class="divide-y divide-gray-200">
                            <% files.forEach(file => { %>
                                <li class="px-6 py-4 hover:bg-gray-50">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center min-w-0 flex-1">
                                            <div class="flex-shrink-0">
                                                <i class="fas fa-file text-gray-400 text-xl mr-4"></i>
                                            </div>
                                            <div class="min-w-0 flex-1">
                                                <div class="flex items-center justify-between">
                                                    <p class="text-sm font-medium text-gray-900 truncate">
                                                        <%= file.originalName %>
                                                    </p>
                                                    <div class="flex items-center space-x-4 ml-4">
                                                        <span class="text-sm text-gray-500">
                                                            <%= (file.size / 1024 / 1024).toFixed(2) %> MB
                                                        </span>
                                                        <a href="/files/<%= file.id %>" 
                                                           class="inline-flex items-center px-3 py-1 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                                            <i class="fas fa-eye mr-1"></i>
                                                            View
                                                        </a>
                                                    </div>
                                                </div>
                                                <p class="text-sm text-gray-500 mt-1">
                                                    Uploaded <%= new Date(file.uploadedAt).toLocaleDateString() %>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            <% }); %>
                        </ul>
                    </div>
                <% } else { %>
                    <div class="text-center py-12 bg-white rounded-lg border-2 border-dashed border-gray-300">
                        <i class="fas fa-file text-gray-400 text-4xl mb-4"></i>
                        <h3 class="text-lg font-medium text-gray-900 mb-2">No files in this folder</h3>
                        <p class="text-gray-500">This folder doesn't contain any files yet.</p>
                    </div>
                <% } %>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="lg:col-span-1">
            <div class="bg-white shadow rounded-lg p-6">
                <h3 class="text-lg font-medium text-gray-900 mb-4">Folder Information</h3>
                
                <dl class="space-y-3">
                    <div>
                        <dt class="text-sm font-medium text-gray-500">Shared by</dt>
                        <dd class="text-sm text-gray-900"><%= folder.user.name %></dd>
                    </div>
                    
                    <div>
                        <dt class="text-sm font-medium text-gray-500">Total files</dt>
                        <dd class="text-sm text-gray-900"><%= files.length %></dd>
                    </div>
                    
                    <div>
                        <dt class="text-sm font-medium text-gray-500">Subfolders</dt>
                        <dd class="text-sm text-gray-900"><%= subfolders.length %></dd>
                    </div>
                    
                    <div>
                        <dt class="text-sm font-medium text-gray-500">Created</dt>
                        <dd class="text-sm text-gray-900"><%= new Date(folder.createdAt).toLocaleDateString() %></dd>
                    </div>
                    
                    <div>
                        <dt class="text-sm font-medium text-gray-500">Share expires</dt>
                        <dd class="text-sm text-gray-900 font-medium text-red-600">
                            <%= new Date(sharedFolder.expiresAt).toLocaleDateString() %>
                        </dd>
                    </div>
                </dl>
                
                <div class="mt-6 pt-4 border-t border-gray-200">
                    <div class="flex items-center text-sm text-gray-500">
                        <i class="fas fa-info-circle mr-2"></i>
                        <span>This is a temporary share link. Access will expire on the date shown above.</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>